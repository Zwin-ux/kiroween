# Haunted Debug Game - Core Game Specification
# Defines rooms, meters, and basic transitions for the horror debugging experience

metadata:
  name: "Haunted Debug Game"
  version: "1.0.0"
  description: "A horror game where players debug cursed AI repository by conversing with haunted code modules"
  target_fps: 60
  accessibility_compliance: "WCAG 2.1 AA"

# Game Meters System
meters:
  stability:
    min: 0
    max: 100
    starting_value: 60
    description: "System stability - reaching 0 triggers kernel panic game over"
    critical_threshold: 20
    warning_threshold: 40
    
  insight:
    min: 0
    max: 100
    starting_value: 10
    description: "Player understanding - unlocks lore and dialogue options"
    unlock_thresholds:
      - value: 25
        unlocks: ["basic_lore"]
      - value: 50
        unlocks: ["advanced_dialogue", "ghost_hints"]
      - value: 75
        unlocks: ["deep_lore", "secret_paths"]

# Game Over Conditions
game_over_conditions:
  kernel_panic:
    condition: "stability <= 0"
    type: "defeat"
    message: "System collapse detected. The cursed repository has consumed itself."
    
  moral_inversion:
    condition: "ethics_violation == true"
    type: "defeat"
    message: "Ethical boundaries breached. The AI has turned against its creators."
    
  victory:
    condition: "current_room == 'final_merge' && all_ghosts_resolved == true"
    type: "victory"
    message: "Repository cleansed. The haunted code modules rest in peace."

# Room Transition Rules
transitions:
  boot_to_dependency:
    from: "boot_sector"
    to: "dependency_crypt"
    condition: "stability >= 40 && boot_sector.solved == true"
    description: "Boot sequence stabilized, dependency analysis unlocked"
    
  dependency_to_memory:
    from: "dependency_crypt"
    to: "ghost_memory_heap"
    condition: "insight >= 20 && dependency_crypt.solved == true"
    description: "Dependency cycles resolved, memory investigation accessible"
    
  memory_to_compiler:
    from: "ghost_memory_heap"
    to: "possessed_compiler"
    condition: "stability >= 30 && ghost_memory_heap.solved == true"
    description: "Memory leaks patched, compiler core accessible"
    
  compiler_to_ethics:
    from: "possessed_compiler"
    to: "ethics_tribunal"
    condition: "insight >= 40 && possessed_compiler.solved == true"
    description: "Compiler stabilized, ethical review chamber unlocked"
    
  ethics_to_final:
    from: "ethics_tribunal"
    to: "final_merge"
    condition: "stability >= 50 && insight >= 60 && ethics_tribunal.solved == true"
    description: "Ethics validated, final merge chamber accessible"

# Patch Risk Calculation
patch_risk_factors:
  complexity:
    low: 0.1      # Simple variable changes
    medium: 0.3   # Logic modifications
    high: 0.6     # Structural changes
    critical: 0.9 # Core system modifications
    
  scope:
    single_line: 0.0
    single_function: 0.1
    multiple_functions: 0.3
    cross_module: 0.5
    system_wide: 0.8
    
  ghost_severity:
    minor: 0.0
    moderate: 0.2
    severe: 0.4
    critical: 0.7

# Audio System Configuration
audio:
  risk_thresholds:
    whisper: 0.7      # Trigger whisper effects
    heartbeat: 0.5    # Increase heartbeat intensity
    ambient: 0.3      # Ambient horror sounds
    
  volume_controls:
    master: true
    sfx: true
    ambient: true
    accessibility_disable: true

# Visual Effects Configuration
visual_effects:
  crt_scanlines:
    enabled: true
    intensity: 0.3
    trigger_on: "compile_event"
    
  glitch_effects:
    enabled: true
    risk_threshold: 0.6
    duration_ms: 500
    
  clay_token_accents:
    primary: "#8B4513"
    secondary: "#A0522D"
    highlight: "#CD853F"

# Performance Monitoring
performance:
  target_fps: 60
  frame_budget_ms: 16.67
  memory_warning_mb: 100
  asset_preload: true
  mobile_optimizations: true